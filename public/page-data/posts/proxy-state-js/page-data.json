{"componentChunkName":"component---src-templates-post-js","path":"/posts/proxy-state-js","result":{"data":{"wpgraphql":{"post":{"blocks":[{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"On a recent project, I needed to handle some global state and make sure a couple elements on the DOM responded reactively to any changes in that state.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"The temptation to reach for a library or framework like React is all-to-tempting a lot of the time —&nbsp;while it’s easy and familiar, loading a giant framework like can be (and usually is) excessive.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"In the end, I opted for building somewhat of a rigid solution with vanilla JS, and it was clear that future flexibility and any added side-effects to the global state would become heavy to manage.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreHeadingBlock","name":"core/heading","attributes":{"content":"Enter Proxy-State","level":2}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"To prevent this in the future,&nbsp;<a href=\"https://www.npmjs.com/package/proxy-state\" target=\"_blank\" rel=\"noreferrer noopener\">I built a lightweight package</a>&nbsp;for managing global state and subscribing to its changes over time.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"The underpinning of the package is the&nbsp;<a rel=\"noreferrer noopener\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy\" target=\"_blank\">Proxy Object</a>&nbsp;(hence the name), which allows setting custom behavior on normal operations. I won’t get into the details of the interface here, as Proxy-State acts as an abstraction layer on top to make things easier.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"Currently, Proxy-State has no support for Internet Explorer. If you find a polyfill, I’d love to see it in the comments!","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreHeadingBlock","name":"core/heading","attributes":{"content":"Using Proxy-State","level":2}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"Install the package via&nbsp;<code>npm</code>&nbsp;or&nbsp;<code>yarn</code>:","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreCodeBlock","name":"core/code","attributes":{"nonNullContent":"npm i proxy-state","className":"bash"}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"In your main entry file, create a store with the following:","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreCodeBlock","name":"core/code","attributes":{"nonNullContent":"import Store from 'proxy-state'\nconst myStore = Store({\n  count: 0\n})","className":"javascript"}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"The default import of the package gives you a constructor function, which takes a single argument: an object representing your default state.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"The constructor will return an object, with 4 properties:","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreHeadingBlock","name":"core/heading","attributes":{"content":"<code>state: {}</code>","level":4}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"The current global state object.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreHeadingBlock","name":"core/heading","attributes":{"content":"<code>listen: (fn( newState, oldState), ?key)</code>","level":4}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"Applies a callback for when state changes. Optionally can pass a unique&nbsp;<code>key</code>&nbsp;as a secondary argument to only run the callback when a property that matches the&nbsp;<code>key</code>&nbsp;changes.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreHeadingBlock","name":"core/heading","attributes":{"content":"<code>detach: (key)</code>","level":4}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"Removes a registered callback by its the&nbsp;<code>key</code>&nbsp;that was used to register it.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreHeadingBlock","name":"core/heading","attributes":{"content":"<code>fetch: (key, ...rest)</code>","level":4}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"Fetches an array of registered subscribers by their keys.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreHeadingBlock","name":"core/heading","attributes":{"content":"Summary","level":2}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"For now, you can only have one callback per key. I did this to force consideration of what is done within a listener, but I may allow more in the future.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreParagraphBlock","name":"core/paragraph","attributes":{"__typename":"WPGraphQL_CoreParagraphBlockAttributesV3","content":"That’s it! I would love to hear your thoughts or special use-cases that aren’t covered. This is in an initial version, but I hope it makes managing state a simpler experience for basic projects.","dropCap":false,"fontSize":null}},{"__typename":"WPGraphQL_CoreButtonBlock","name":"core/button","attributes":{"url":"https://codesandbox.io/s/proxy-state-demo-d5fl0","text":"Play with on CodeSandbox"}}],"date":"2020-03-19T10:14:53","excerpt":"<p>On a recent project, I needed to handle some global state and make sure a couple elements on the DOM responded reactively to any changes in that state. The temptation to reach for a library or framework like React is all-to-tempting a lot of the time —&nbsp;while it’s easy and familiar, loading a giant framework [&hellip;]</p>\n","title":"Introducing Proxy-State","slug":"proxy-state-js","postId":89,"author":{"avatar":{"url":"http://0.gravatar.com/avatar/c4e7524abdec288e00e23dc1d15f91d7?s=96&d=mm&r=g","localFile":{"childImageSharp":{"fixed":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20preserveAspectRatio='none'%3e%3cpath%20d='M0%200l6%202%205%202-2%201-5-2H0v18l1%2019%202-2%202-4c0-2%200-2-2-2l-1-5v-5h4l4-1%202%201v4l4%209%202%202c2%204%204%204%205%201l2-2%201-1%201-5c0-4-1-4-3%200-2%202-4%203-3%200l-2-1-3-1h1l2-1h2l3-1c1%200%201-1-2-1-4-2-5-1-6%200-1%202-1%202-3-2l-2-4%204-1c5%200%205-2%201-2-2%200-3%200-3-2%200-3%203-5%208-6s6%200%206%204l1%204%201-1c0-3%201-3%204-2s3%201%203%207c0%205%200%207%202%208%203%202%203%2010%200%209l-2%202h3c2%200%202-3%202-18L40%202c0-2-3-2-20-2H0m0%2022c0%2012%201%2014%201%206V16l4%201c5%201%205%202%204-5V6H5L2%207%201%206%200%2022'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","width":40,"height":40,"src":"/static/9172a1c088de62f7ef5f5d27fc94f236/b13df/c4e7524abdec288e00e23dc1d15f91d7.jpg","srcSet":"/static/9172a1c088de62f7ef5f5d27fc94f236/b13df/c4e7524abdec288e00e23dc1d15f91d7.jpg 1x,\n/static/9172a1c088de62f7ef5f5d27fc94f236/c28c8/c4e7524abdec288e00e23dc1d15f91d7.jpg 1.5x,\n/static/9172a1c088de62f7ef5f5d27fc94f236/4e333/c4e7524abdec288e00e23dc1d15f91d7.jpg 2x","srcWebp":"/static/9172a1c088de62f7ef5f5d27fc94f236/44b89/c4e7524abdec288e00e23dc1d15f91d7.webp","srcSetWebp":"/static/9172a1c088de62f7ef5f5d27fc94f236/44b89/c4e7524abdec288e00e23dc1d15f91d7.webp 1x,\n/static/9172a1c088de62f7ef5f5d27fc94f236/05cc6/c4e7524abdec288e00e23dc1d15f91d7.webp 1.5x,\n/static/9172a1c088de62f7ef5f5d27fc94f236/e90a5/c4e7524abdec288e00e23dc1d15f91d7.webp 2x"}}}},"description":null,"nickname":null,"firstName":"Calvin","lastName":"Koepke"},"featuredImage":{"altText":"","sourceUrl":"http://gatsby.dev/wp-content/uploads/2020/03/Screen-Shot-2020-03-19-at-10.38.17-AM.png","localFile":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='298'%20viewBox='0%200%20400%20298'%20preserveAspectRatio='none'%3e%3cpath%20d='M46%20201l-1%2012%201%2012h133v-12l-1-12H46m171%2011l1%2013h132v-25H217v12'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.3358778625954197,"src":"/static/cf1cf935f55650ffbe96ab935073361d/73c85/Screen-Shot-2020-03-19-at-10.38.17-AM.png","srcSet":"/static/cf1cf935f55650ffbe96ab935073361d/d4144/Screen-Shot-2020-03-19-at-10.38.17-AM.png 175w,\n/static/cf1cf935f55650ffbe96ab935073361d/a5370/Screen-Shot-2020-03-19-at-10.38.17-AM.png 350w,\n/static/cf1cf935f55650ffbe96ab935073361d/73c85/Screen-Shot-2020-03-19-at-10.38.17-AM.png 700w,\n/static/cf1cf935f55650ffbe96ab935073361d/4ff95/Screen-Shot-2020-03-19-at-10.38.17-AM.png 1050w,\n/static/cf1cf935f55650ffbe96ab935073361d/54967/Screen-Shot-2020-03-19-at-10.38.17-AM.png 1400w,\n/static/cf1cf935f55650ffbe96ab935073361d/2356e/Screen-Shot-2020-03-19-at-10.38.17-AM.png 2016w","srcWebp":"/static/cf1cf935f55650ffbe96ab935073361d/47203/Screen-Shot-2020-03-19-at-10.38.17-AM.webp","srcSetWebp":"/static/cf1cf935f55650ffbe96ab935073361d/5575a/Screen-Shot-2020-03-19-at-10.38.17-AM.webp 175w,\n/static/cf1cf935f55650ffbe96ab935073361d/8ea22/Screen-Shot-2020-03-19-at-10.38.17-AM.webp 350w,\n/static/cf1cf935f55650ffbe96ab935073361d/47203/Screen-Shot-2020-03-19-at-10.38.17-AM.webp 700w,\n/static/cf1cf935f55650ffbe96ab935073361d/565e9/Screen-Shot-2020-03-19-at-10.38.17-AM.webp 1050w,\n/static/cf1cf935f55650ffbe96ab935073361d/9592d/Screen-Shot-2020-03-19-at-10.38.17-AM.webp 1400w,\n/static/cf1cf935f55650ffbe96ab935073361d/b8441/Screen-Shot-2020-03-19-at-10.38.17-AM.webp 2016w","sizes":"(max-width: 700px) 100vw, 700px"}}}}}}},"pageContext":{"id":"cG9zdDo4OQ=="}}}